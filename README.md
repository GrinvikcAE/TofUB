# TofUB

## Описание

Скрипт, созданный для Новосибирского регионального Турнира Юных Биологов (подробнее о турнире можно
узнать [здесь](https://bioturnir.ru/tub/novosibirsk)). В 2023 году было подано 46 заявок на участие в турнире,
на турнире приняло участие 19 команд, из которых 10 команд - в младшей лиге и 9 команд - в старшей лиге. Суммарно на
турнире принимало участие 97 детей.

Скрипт основан на взаимодействии с Google Drive API и Google
Sheets API с заранее созданной таблицей для выставления оценок.
По завершению выставления всех оценок заносятся данные в следующие таблицы: сыгранные задачи и отказы,
личный рейтинг, командный рейтинг
(доступ ко всем таблицам по требованию), а также отзыв разрешений на редактирования данных таблиц у ведущих и (или)
счетчиков.

Также для управления создан Телеграмм-бот, в котором на данный момент доступны следующие команды:

* /get - Список файлов и разрешения для них: string_in_name, по умолчанию None
* /add - Добавить разрешения: email file_id
* /del - Удалить разрешения: email file_name
* /create - Добавить в start.txt файл для последующей автоматической выдачи разрешения: ФамилияИО email file_name
* /refresh - Очистить файл start.txt
* /start_day - Начать выдачу разрешений и проверку файлов на завершение
* /del_file - Удалить файл: file_id

Выдача разрешений на почты, не принадлежащие Google, не проверялась.

## Установка

* Описание установки в процессе написания. В скрипте используются следующие библиотеки: os, io, datetime, time,
  threading,
  asyncio, aiogram, bestconfig, pandas, pprint, apiclient, gspred, httplib2, googleapiclient, google, oauth2client

## Настройка

Примеры и описание настроек лежит в файле <b>./keys/settings_example.json</b>. Для работы необходимо переименовать файл
в <b>settings.json</b>.
Также все файлы, указанные в <b>settings.json</b>, должны лежать в папке <b>./keys</b>.

## Будущие задачи

Основной целью является написание полноценного веб-сервиса для удобного выставления, отслеживания оценок и результатов.
Также планируется добавить функции личного кабинета, регистрации команд, подачи тестового решения для участия в турнире.

В ближайших задачах:

* Добавить запуск функции через Telegram-бота для отслеживания сыгранных задач и отказов (в данный момент эта функция
  работает костыльно)
* Рефакторинг названий переменных и функций для упрощения чтений кода
* Добавление функции генерации отчетности файлов в .pdf формате, отправка в личные сообщения через Телеграм-бот
* Более точное выставление времени задержки между последней выставленной оценкой и отзывом прав на редактирование
* (Возможно, потому что на данный момент в этом нет необходимости) Оптимизация работы некоторых функций и запросов к API
